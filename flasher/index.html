<!DOCTYPE html>
<html>
  <script
    type="module"
    src="https://unpkg.com/esp-web-tools@9/dist/web/install-button.js?module"
  ></script>

  <head>
    <title>technoLARP ESP Web Tools</title>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="manifests_list.js"></script>
  </head>
  <body>
    <h1>Flasher</h1>
    <p>Selectionnez votre firmware</p>
    <div x-data="{ selectedManifest : '', manifests: manfestList, selectedObject: '' }">
      
      <select name="type" class="radios" x-model="selectedObject" x-on:change="selectedManifest = ''">
        <option disabled value="">--------------</option>
        <option selected disabled value="">sélectionnez une valeur</option>
        <template x-for="manifest in manifests" :key="manifest.object">
          <option x-bind:value="manifest.object" x-text="manifest.object"></option>
        </template>
      </select>


      <select name="type" class="radios" x-model="selectedManifest" 
      x-show="selectedObject">
        <option disabled value="">--------------</option>
        <option selected disabled value="">sélectionnez une valeur</option>
        <template x-for="version in manifests.find((e) => e.object === selectedObject).versions" :key="version.id">
          <option x-bind:value="version.manifest" x-text="version.id"></option>
        </template>
      </select>

	  
      <br />
      <br />
      <br />
      <br />

      <esp-web-install-button
        x-show="selectedManifest !== ''"
        x-bind:manifest="selectedManifest"
      ></esp-web-install-button>
      <button
        x-show="selectedManifest === ''"
        disabled
        style="
          position: relative;
          font-size: 14px;
          padding: 8px 28px;
          color: var( #fff);
          background-color: lightgray;
          border: none;
          border-radius: 4px;
          box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px,
            rgba(0, 0, 0, 0.12) 0px 3px 1px -2px,
            rgba(0, 0, 0, 0.2) 0px 1px 5px 0px;
        "
      >
        CONNECT
      </button>
    </div>

    <br /><br />
    <h1><b>Manuel rapide</b></h1>
    Utiliser cette page sur un navigateur chrome ou edge (ESP Web Tools ne
    fonctionne pas avec firefox)<br />
    <br />
    Sélectionner le firmware à installer dans la liste déroulante<br />
    Connecter le wemos D1 mini pro sur un port USB<br />
    Cliquer sur le bouton CONNECT<br />
    <br />

    Choisir le port USB qui correspond au wemos<br />
    Cliquer sur le bouton "Connexion"<br />
    <img
      src="https://technolarp.github.io/flasher/image/step_01.png"
      width="400"
    /><br /><br />

    Cliquer sur "INSTALL TECHNOLARP xxxx"<br />
    <img
      src="https://technolarp.github.io/flasher/image/step_02.png"
      width="400"
    /><br /><br />

    A l'étape Confirm installation, cliquer sur INSTALL<br />
    <img
      src="https://technolarp.github.io/flasher/image/step_03.png"
      width="400"
    /><br /><br />

    Différentes étape se succèdent, Preparing / Erasing / Installing<br />
    <img
      src="https://technolarp.github.io/flasher/image/step_04.png"
      width="400"
    /><br /><br />
    <img
      src="https://technolarp.github.io/flasher/image/step_05.png"
      width="400"
    /><br /><br />
    <img
      src="https://technolarp.github.io/flasher/image/step_06.png"
      width="400"
    /><br /><br />

    <br /><br />
    Bonus, on peux accèder à la sortie serial en cliquant sur "LOGS &
    CONSOLE"<br />
    <img
      src="https://technolarp.github.io/flasher/image/step_07.png"
      width="400"
    />
    <img
      src="https://technolarp.github.io/flasher/image/step_08.png"
      width="400"
    /><br /><br />

    <br /><br />
  </body>
</html>
